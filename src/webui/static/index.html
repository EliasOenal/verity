<!DOCTYPE html>
<html>
<head>
  <title>Verity</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="vera.svg">
  <link href="bootstrap.min.css" rel="stylesheet">
  <link href="bootstrap-icons.min.css" rel="stylesheet">
  <script src="bootstrap.bundle.min.js"></script>
  <script src="frontend.js" defer></script>
  <script src="verityUI.js" defer></script>
  <script> // This script tag prevents a flash of unstyled content (FOUC) on page load and should not be moved.
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.setAttribute('data-bs-theme', 'dark');
    }
  </script>
  <style>@import url('style.css');</style>
</head>

<body>
  <div class="content-wrapper">
    <div class="position-absolute top-0 end-0 m-0">
      <button class="btn btn-link dark-mode-toggle fade-in" onclick="toggleDarkMode()" type="button">
        <span id="theme-icon">
          <!-- The icon will be set here by the updateIcon function -->
        </span>
      </button>
    </div>
    <div class="container-fluid">
      <div class="row" id="globalrow">
        <div class="col-sm-3" id="leftnav navbar bg-dark navbar-dark">
          <div class="row my-3">
            <img src="vera.svg" class="img-fluid py-3 vera-anim vera-spin" id="veralogo" alt=""
              onclick="veraRoll()" />
          </div>

          <!-- leftnavCollapsible (navigation, identity and peers) default collapsed on mobile view -->
          <button id="leftnavCollapseToggler" class="navbar-toggler d-sm-none navbar-toggler-icon"
                  type="button" data-bs-toggle="collapse" data-bs-target="#leftnavCollapsible">
          </button>
          <div id="leftnavCollapsible" class="collapse navbar-collapse d-sm-block">
            <ul id="toplevelnav" class="navbar-nav my-5">
              <li class="nav-item" id="navPostsAll">
                <a href="#" class="nav-link" onclick="window.verityUI.navPostsAll()">All posts</a>
              </li>
              <li class="nav-item" id="navPostsWithAuthors">
                <a href="#" class="nav-link" onclick="window.verityUI.navPostsWithAuthors()">No anonymous posts</a>
              </li>
              <li class="nav-item" id="navPostsSubscribedInTree">
                <a href="#" class="nav-link" onclick="window.verityUI.navPostsSubscribedInTree()">Subscribed (anywhere in thread)</a>
              </li>
              <li class="nav-item" id="navPostsSubscribedReplied">
                <a href="#" class="nav-link" onclick="window.verityUI.navPostsSubscribedReplied()">Subscribed (+preceding)</a>
              </li>
              <li class="nav-item" id="navPostsSubscribedStrict">
                <a href="#" class="nav-link" onclick="window.verityUI.navPostsSubscribedStrict()">Subscribed (strict)</a>
              </li>
              <li class="nav-item" id="navPostsSubscribedReplied1">
                <a href="#" class="nav-link" onclick="window.verityUI.navPostsSubscribedReplied(1)">Subscribed (+preceding+WOT1)</a>
              </li>
              <li class="nav-item" id="navPostsSubscribedReplied3">
                <a href="#" class="nav-link" onclick="window.verityUI.navPostsSubscribedReplied(3)">Subscribed (+preceding+WOT3)</a>
              </li>
            </ul>

            <div class="row" id="identityrow">
              <h5>My Identity</h5>
              <form class="input-group" id="idform" action="javascript:void(0);"
                onsubmit="window.verityUI.saveIdentity();">
                <input class="form-control form-control-sm" type="text" id="idname" placeholder="Choose your user name"
                  required>
                <button class="btn btn-sm btn-primary" type="submit">Save</button>
              </form>
            </div> <!-- identityrow-->

            <div class="row my-3 mb-0" id="peerrow">
              <h5 class="my-1">Peers</h5>
              <ul id="peerlist" class="list-unstyled text-truncate mb-0">
              </ul>
            </div> <!-- peerrow -->
          </div> <!-- leftnavCollapsible -->
        </div> <!-- leftnav -->

        <div class="col-sm-8 container-fluid maincontent">
          <div class="verityNewPostDiv mt-3 mt-sm-5 mb-3">
            <form id="verityNewPostForm" class="form-floating row" action="javascript:void(0);"
              onsubmit="window.verityUI.makeNewPost(this);">
              <textarea id="verityNewPostInput" class="form-control verityPostInput"
                        maxlength="600" rows="2" placeholder="Make new post"
                        oninput="window.onTextareaInput(this)" required></textarea>
              <label class="form-label" for="verityNewPostInput">Make new post</label>
              <button class="btn btn-primary" type="submit" id="newcube">Post</button>
            </form>
            <div class="progress bg-danger verityPostCharCountBarContainer" role="progressbar">
              <div class="progress-bar bg-success verityPostCharCountBar" style="width: 100%"></div>
              <div class="verityPostRemainingChars" style="display: none;">600</div>
            </div>
          </div>

          <div class="row" id="postsrow">
            <ul id="cubelist" class="list-unstyled">


            </ul>
          </div> <!-- postsrow -->


        </div> <!-- maincontent -->
      </div>
    </div>
  </div>

  <template id="verityPostTemplate">
    <li class="verityPost move-fade-in"
        data-cubekey="<cubekey>" data-timestamp="1695048919">
      <div class="verityPostHeader">
        <img class="verityPostProfilePic" src="" />
        <p>
          <b class="verityCubeAuthor" title="MUC key <muckey>" id="<cubekey>-author">
            User name
          </b>
          <button type="button" class="btn btn-outline-primary veritySubscribeButton"
                  data-authorkey="<muckey>"
                  onclick="window.verityUI.subscribeUser(this)">
            Subscribe
          </button>
          <br />
          <small class="verityPostDate">Friday, September 15, 2023 6:22:12 PM</small>
        </p>
      </div>
      <p class="verityPostContent" title="Cube Key <cubekey>">Text</p>
      <div class="verityReplyDiv">
        <form action="javascript:void(0);"
              onsubmit="window.verityUI.makeNewPost(this);"
              class="verityReplyForm input-group">
          <textarea maxlength="600" class="form-control verityPostInput" rows="1"
                    placeholder="Reply" id="verityReplyInput-<cubekey>" type="text"
                    required="" style="height: 0px;"
                    oninput="window.onTextareaInput(this)"></textarea>
          <button type="submit" class="btn btn-primary verityPostButton" id="replybutton-<cubkey>">Post</button>
        </form>
        <div class="progress bg-danger verityPostCharCountBarContainer" role="progressbar">
          <div class="progress-bar bg-success verityPostCharCountBar" style="width: 100%"></div>
          <div class="verityPostRemainingChars" style="display: none;">600</div>
        </div>
      </div>
    </li>
  </template>

</body> <!-- globalrow, container and body -->

</html>