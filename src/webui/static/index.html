<!DOCTYPE html>
<html>
<head>
  <title>Verity</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="vera.svg">
  <link href="bootstrap.min.css" rel="stylesheet">
  <link href="bootstrap-icons.min.css" rel="stylesheet">
  <script src="bootstrap.bundle.min.js"></script>
  <script src="frontend.js" defer></script>
  <script src="verityUI.js" defer></script>
  <script>
    // This script tag prevents a flash of unstyled content (FOUC) on page load
    // and should not be moved.
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.setAttribute('data-bs-theme', 'dark');
    }
  </script>
  <style>@import url('style.css');</style>
</head>

<body>
  <div class="content-wrapper">
    <div class="position-absolute top-0 end-0 m-0">
      <button class="btn btn-link dark-mode-toggle fade-in"
              onclick="toggleDarkMode()" type="button">
        <span id="theme-icon">
          <!-- The icon will be set here by the updateIcon function -->
        </span>
      </button>
    </div>
    <div class="container-fluid">
      <div class="row" id="globalrow">
        <div class="col-sm-3" id="leftnav navbar bg-dark navbar-dark">
          <div class="row my-3">
            <img src="vera.svg" class="img-fluid py-3 vera-anim vera-spin"
                 id="veralogo" alt="" onclick="veraRoll()" />
          </div>

          <!-- leftnavCollapsible (navigation, identity and peers)
               default collapsed on mobile view
          -->
          <button id="leftnavCollapseToggler"
                  class="navbar-toggler d-sm-none navbar-toggler-icon"
                  type="button" data-bs-toggle="collapse"
                  data-bs-target="#leftnavCollapsible">
          </button>
          <div id="leftnavCollapsible" class="collapse navbar-collapse d-sm-block">
            <ul id="toplevelnav" class="navbar-nav my-5">
              <li class="nav-item" id="navPostsAll">
                <a href="#" class="nav-link"
                  onclick="window.verityUI.navPostsAll()">
                    All posts
                </a>
              </li>
              <li class="nav-item" id="navPostsWithAuthors">
                <a href="#" class="nav-link"
                  onclick="window.verityUI.navPostsWithAuthors()">
                    No anonymous posts
                </a>
              </li>
              <li class="nav-item" id="navPostsSubscribedInTree">
                <a href="#" class="nav-link"
                  onclick="window.verityUI.navPostsSubscribedInTree()">
                    Subscribed (anywhere in thread)
                </a>
              </li>
              <li class="nav-item" id="navPostsSubscribedReplied">
                <a href="#" class="nav-link"
                  onclick="window.verityUI.navPostsSubscribedReplied()">
                    Subscribed (+preceding)
                </a>
              </li>
              <li class="nav-item" id="navPostsSubscribedStrict">
                <a href="#" class="nav-link"
                  onclick="window.verityUI.navPostsSubscribedStrict()">
                    Subscribed (strict)
                </a>
              </li>
              <li class="nav-item" id="navPostsSubscribedReplied1">
                <a href="#" class="nav-link"
                  onclick="window.verityUI.navPostsSubscribedReplied(1)">
                    Subscribed (+preceding+WOT1)
                </a>
              </li>
              <li class="nav-item" id="navPostsSubscribedReplied3">
                <a href="#" class="nav-link"
                  onclick="window.verityUI.navPostsSubscribedReplied(3)">
                    Subscribed (+preceding+WOT3)
                </a>
              </li>
              <li class="nav-item" id="navCubeExplorer">
                <a href="#" class="nav-link"
                  onclick="window.verityUI.navCubeExplorer()">
                    Cube Explorer
                </a>
              </li>
            </ul>

            <div class="row my-4" id="identityrow">
              <h5>My Identity</h5>
              <form class="input-group" id="idform" action="javascript:void(0);"
                onsubmit="window.verityUI.saveIdentity();">
                <input class="form-control form-control-sm" type="text"
                       id="idname" placeholder="Choose your user name" required />
                <button class="btn btn-sm btn-primary" type="submit">Save</button>
              </form>
            </div> <!-- identityrow-->

            <div class="row my-4" id="verityOnlineStatusArea">
              <a class="verityOnlineStatus" href="#" onclick="window.verityUI.navPeers()">
                <span class="redDot"></span>Offline
              </a>
            </div>
          </div> <!-- leftnavCollapsible -->
        </div> <!-- leftnav -->

        <div class="col-sm-8 container-fluid" id="verityContentArea">
        </div> <!-- verityContentArea -->
      </div> <!-- globalrow -->
    </div> <!-- container-fluid -->
  </div> <!-- content-wrapper -->




  <!-- END OF FRAMEWORK-->
  <!-- Next up are templates -->
  <!-- These will be cloned as needed by the various Views -->
  <template id="verityPostViewTemplate">
    <div class="verityPostView">
      <div class="verityNewPostDiv mt-3 mt-sm-5 mb-3">
        <form id="verityNewPostForm" class="form-floating row" action="javascript:void(0);"
          onsubmit="window.verityUI.postController.makeNewPost(this);">
          <textarea id="verityNewPostInput" class="form-control verityPostInput"
                    maxlength="600" rows="2" placeholder="Make new post"
                    oninput="window.onTextareaInput(this)" required></textarea>
          <label class="form-label" for="verityNewPostInput">Make new post</label>
          <button class="btn btn-primary" type="submit" id="newcube">Post</button>
        </form>
        <div class="progress bg-danger verityPostCharCountBarContainer" role="progressbar">
          <div class="progress-bar bg-success verityPostCharCountBar" style="width: 100%">
          </div>
          <div class="verityPostRemainingChars" style="display: none;">600</div>
        </div>
      </div>

      <div class="row" id="verityPostsRow">
        <ul class="verityPostList list-unstyled">
          <li class="verityPost move-fade-in"
          data-cubekey="<cubekey>" data-timestamp="1695048919">
            <div class="verityPostHeader">
              <img class="verityPostProfilePic" src="" />
              <p>
                <b class="verityCubeAuthor" title="MUC key <muckey>" id="<cubekey>-author">
                  User name
                </b>
                <button type="button"
                        class="btn btn-outline-primary veritySubscribeButton"
                        data-authorkey="<muckey>"
                        onclick="window.verityUI.postController.subscribeUser(this)">
                  Subscribe
                </button>
                <br />
                <small class="verityPostDate">
                  Friday, September 15, 2023 6:22:12 PM
                </small>
              </p>
            </div>
            <p class="verityPostContent" title="Cube Key <cubekey>">Text</p>
            <div class="verityReplyDiv">
              <form action="javascript:void(0);"
                    onsubmit="window.verityUI.postController.makeNewPost(this);"
                    class="verityReplyForm input-group">
                <textarea maxlength="600" class="form-control verityPostInput"
                          rows="1" type="text" required
                          placeholder="Reply" id="verityReplyInput-<cubekey>"
                          oninput="window.onTextareaInput(this)"></textarea>
                <button type="submit" class="btn btn-primary verityPostButton"
                        id="replybutton-<cubekey>">
                  Post
                </button>
              </form>
              <div class="progress bg-danger verityPostCharCountBarContainer"
                   role="progressbar">
                <div class="progress-bar bg-success verityPostCharCountBar"></div>
                <div class="verityPostRemainingChars" style="display: none;">600</div>
              </div>
            </div> <!-- verityReplyDiv-->
        </li>
        </ul>
      </div> <!-- verityPostsRow -->
    </div> <!-- verityPostView -->
  </template> <!-- verityPostViewTemplate -->



  <template id="verityPeerViewTemplate">
    <div class="verityPeerView">
      <h5 class="mt-3 mt-sm-5 mb-3">Peers</h5>
      <p class="verityMyIdParagraph">My peer ID:
        <span class="verityMyId">01234567890ABCDEF</span>
      </p>
      <p class="form-check form-switch">
        <input class="verityAutoConnectSwitch form-check-input"
               type="checkbox" role="switch"
               onclick="window.verityUI.peerController.toggleAutoConnect(this)"
               checked />
        Auto-connect peers
      </p>
      <div class="verityNewPeerDiv">
        <form class="verityNewPeerForm input-group"
              action="javascript:void(0);"
              onsubmit="window.verityUI.peerController.connectPeer(this);">
          <div class="form-floating">
            <input id="verityNewPeerInput" class="form-control verityNewPeerInput"
                   maxlength="600" placeholder="New peer address" required />
            <label class="form-label" for="verityNewPeerInput">New peer address</label>
          </div>
          <button class="btn btn-primary verityNewPeerButton" type="submit">
            Connect
          </button>
        </form>
      </div>

      <ul class="verityPeerList">
        <li class="verityPeer card move-fade-in">
          <table class="table card-body verityPeerTable">
            <tr class="verityPeerDataRow">
              <th class="verityPeerDataHeader">ID</th>
              <td class="verityPeerData verityPeerId">
                e66c51d5130992aac3be542a5df17996
              </td>
            </tr>
            <tr class="verityPeerDataRow">
              <th class="verityPeerDataHeader">Connected through</th>
              <td class="verityPeerData verityPeerConn">
                ws://verity.hahn.mt:1984/
              </td>
            </tr>
            <tr class="verityPeerDataRow">
              <th class="verityPeerDataHeader">Known addresses</th>
              <td class="verityPeerData verityPeerAddresses">
                <ol class="verityPeerAddressList">
                  <li value="0">ws://demonstration.address <br />
                    <button type="button" data-peerid="e66c51d5130992aac3be542a5df17996"
                    data-addrindex="1" class="veritySmallButton btn btn-outline-primary active"
                    onclick="window.verityUI.peerController.makeAddressPrimary(this)">
                      Primary
                    </button>
                  </li>
                  <li value="1">/dns4/demonstration.address/tcp/1985/wss/ <br/>
                    <button type="button" data-peerid="e66c51d5130992aac3be542a5df17996"
                    data-addrindex="1" class="veritySmallButton btn btn-outline-primary"
                    onclick="window.verityUI.peerController.makeAddressPrimary(this)">
                      Primary
                    </button>
                  </li>
                </ol>
              </td>
            </tr>
          </table>
          <p>
            <button class="verityPeerReconnectButton btn btn-warning"
                    data-peerid="e66c51d5130992aac3be542a5df17996"
                    onclick="window.verityUI.peerController.disconnectPeer(this, true)">
              Reconnect
            </button>
            <button class="verityPeerDisconnectButton btn btn-danger"
                    data-peerid="e66c51d5130992aac3be542a5df17996"
                    onclick="window.verityUI.peerController.disconnectPeer(this)">
              Disconnect
            </button>
          </p>
        </li>
      </ul>
    </div>
  </template> <!-- verityPeerViewTemplate -->



  <template id="verityCubeExplorerTemplate">
    <div class="verityCubeExplorer">
      <h2 class="mt-3 mt-sm-5 mb-3">CCI Cube explorer</h2>
      <table class="table verityCubeStats">
        <tr>
          <th>Total Cubes stored</th>
          <td class="verityCubeStoreStatTotalCubes">31337</td>
        </tr>
        <tr>
          <th>Cubes displayed</th>
          <td class="verityCubeStoreStatCubesDisplayed">1337</td>
        </tr>
        <tr>
          <th>Unparsable / non-CCI Cubes skipped</th>
          <td class="verityCubeStoreStatCubesUnparsable">over 9000</td>
        </tr>
      </table>

      <ul class="verityCubeList accordion" id="verityExploredCubes">
        <li class="verityCube accordion-item"
            data-cubekey="44ef229784f42e86fdfa6e7b7b57157d05b47eb1373d5c1c1e36201376441000">
          <h5 class="accordion-header">
            <button class="accordion-button verityCubeToggleControl verityCubeSummary collapsed"
                    type="button" data-bs-toggle="collapse" aria-expanded="false"
                    data-bs-target="#verityExploredCube-44ef229784f42e86fdfa6e7b7b57157d05b47eb1373d5c1c1e36201376441000"
                    aria-controls="verityExploredCube-44ef229784f42e86fdfa6e7b7b57157d05b47eb1373d5c1c1e36201376441000">
              44ef229784f42e86fdfa6e7b7b57157d05b47eb1373d5c1c1e36201376441000
            </button>
          </h5>
          <div id="verityExploredCube-44ef229784f42e86fdfa6e7b7b57157d05b47eb1373d5c1c1e36201376441000"
               class="accordion-collapse collapse verityExploredCube"
               data-bs-parent="#verityExploredCubes">
            <div class="accordion-body">
              <table class="table verityCubeInfo">
                <tr>
                  <th>Cube type</th>
                  <td class="verityCubeType">Dumb</td>
                </tr>
                <tr>
                  <th>Hash</th>
                  <td class="verityCubeHash">44ef229784f42e86fdfa6e7b7b57157d05b47eb1373d5c1c1e36201376441000</td>
                </tr>
                <tr>
                  <th>Date</th>
                  <td class="verityCubeDate">Tuesday, February 6, 2024 1:01:04 PM</td>
                </tr>
                <tr>
                  <th>Difficulty</th>
                  <td class="verityCubeDifficulty">42</td>
                </tr>
              </table>
              <!-- Schematic Cube view-->
              <ul class="veritySchematicFields nav nav-pills mb-3"
                id="pills-tab-44ef229784f42e86fdfa6e7b7b57157d05b47eb1373d5c1c1e36201376441000" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link border border-primary rounded me-1 mb-1 veritySchematicField"
                          type="button"
                          role="tab" data-bs-toggle="pill" aria-selected="false"
                          id="pills-tab-44ef229784f42e86fdfa6e7b7b57157d05b47eb1373d5c1c1e36201376441000-0"
                          data-bs-target="#pills-44ef229784f42e86fdfa6e7b7b57157d05b47eb1373d5c1c1e36201376441000-0"
                          aria-controls="pills-44ef229784f42e86fdfa6e7b7b57157d05b47eb1373d5c1c1e36201376441000-0">
                    Version
                  </button>
                </li>
              </ul>
              <div class="tab-content veritySchematicFieldDetailsContainer" id="pills-tabContent">
                <table class="tab-pane fade veritySchematicFieldDetails table"
                       id="pills-44ef229784f42e86fdfa6e7b7b57157d05b47eb1373d5c1c1e36201376441000-0"
                       role="tabpanel"
                       aria-labelledby="pills-tab-44ef229784f42e86fdfa6e7b7b57157d05b47eb1373d5c1c1e36201376441000-0">
                  <tr class="veritySchematicFieldDetails">
                    <th>Type</th>
                    <td class="veritySchematicFieldType">VERSION</td>
                  </tr>
                  <tr>
                    <th>Content length</th>
                    <td class="veritySchematicFieldLength">42</td>
                  </tr>
                  <tr>
                    <th>Content (hex)</th>
                    <td class="veritySchematicFieldHex">0xcafebabe</td>
                  </tr>
                  <tr>
                    <th>Content (utf-8)</th>
                    <td class="veritySchematicFieldUtf8">Campus intra cubum est</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </template> <!-- verityCubeExplorerTemplate -->


</body>

</html>